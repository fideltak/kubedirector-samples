apiVersion: kubedirector.hpe.com/v1beta1
kind: KubeDirectorApp
metadata:
  name: test
  annotations:
    kubedirector.hpe.com/optionalSecretNames: hpecp-ext-auth-secret
spec:
  configSchemaVersion: 8
  defaultEventList: 
  - "configure"
  defaultConfigPackage:
    packageURL: https://github.com/fideltak/kubedirector-samples/raw/test/test/appconfig.tgz
    useNewSetupLayout: true
  config:
    roleServices:
    - roleID: server
      serviceIDs:
      - server
    selectedRoles:
    - server
  distroID: fideltak/test
  label:
    description: Nginx Server in KubedirectorApp
    name: test
  logoURL: https://raw.githubusercontent.com/fideltak/kubedirector-samples/test/test/logo.png
  roles:
  - cardinality: "1+"
    id: server
    imageRepoTag: fideltak/dapp-nginx:0.5
    maxLogSizeDump: 256
    minResources:
      nvidia.com/gpu: "0"
      cpu: "1"
      memory: 1Gi
    persistDirs:
    - "/cache"
    minStorage:
      size: "1Gi"
      ephemeralModeSupported: true
  services:
  - endpoint:
      isDashboard: false
      port: 80
    id: server
    label:
      name: server
#  systemdRequired: true
  version: "1.23"